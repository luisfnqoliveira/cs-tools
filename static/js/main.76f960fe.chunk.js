(this["webpackJsonpcs-tools"]=this["webpackJsonpcs-tools"]||[]).push([[0],{153:function(e,t,o){},154:function(e,t,o){},157:function(e,t,o){},161:function(e,t,o){},190:function(e,t,o){},195:function(e,t,o){"use strict";o.r(t);var n=o(1),a=o.n(n),r=o(24),s=o.n(r),i=(o(153),o(30)),c=o(31),l=o(33),b=o(32),u=o.p+"static/media/Upitt_logo_400x400.8afe9141.jpg",h=o(212),d=o(211),j=(o(154),o(118),o(8)),O=[{label:"Student",value:"Student"},{label:"Librarian",value:"Librarian"}],f=function(e){Object(l.a)(o,e);var t=Object(b.a)(o);function o(){return Object(i.a)(this,o),t.apply(this,arguments)}return Object(c.a)(o,[{key:"render",value:function(){var e=this.props.value;return Object(j.jsx)(h.a.Group,{options:O,onChange:this.props.onChange,value:e,optionType:"button",buttonStyle:"solid"})}}]),o}(n.Component),v=function(e){Object(l.a)(o,e);var t=Object(b.a)(o);function o(){return Object(i.a)(this,o),t.apply(this,arguments)}return Object(c.a)(o,[{key:"render",value:function(){return Object(j.jsxs)("header",{className:"App-header",children:[Object(j.jsx)("img",{src:u,alt:"logo",className:"App-logo"}),Object(j.jsx)("p",{className:"title",children:"Memory Paging Practice System"}),Object(j.jsx)(d.a,{type:"default",className:"overview-button",onClick:this.props.clickOverview,children:"Overview"}),Object(j.jsx)("div",{className:"role-button",children:Object(j.jsx)(f,{value:this.props.value,onChange:this.props.onChange})})]})}}]),o}(n.Component),p=(o(157),function(e){Object(l.a)(o,e);var t=Object(b.a)(o);function o(){return Object(i.a)(this,o),t.apply(this,arguments)}return Object(c.a)(o,[{key:"render",value:function(){return Object(j.jsx)("footer",{className:"footer",children:"University of Pittsburgh"})}}]),o}(n.Component)),m=o(48),g=o(39),k=o(147),x=o(210),y="book",S=o(208),w=o(214),B=o(216),C=o.p+"static/media/bookCover.6a39f467.jpg",N=o(209),_=o(144);var P=function(e){var t=S.a.Meta,o=Object(N.a)((function(){return{type:y,item:{code:e.code,name:e.name,author:e.author,level:e.level,position:e.position,created_date:e.created_date,frequency:e.frequency,last_borrowed:e.last_borrowed},collect:function(e){return{isDragging:!!e.isDragging()}}}})),n=Object(g.a)(o,2),a=(n[0].isDragging,n[1]),r=Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{children:["Created: ",e.created_date]}),Object(j.jsxs)("p",{children:["Frequency: ",e.frequency]}),Object(j.jsxs)("p",{children:["Last borrowed: ",e.last_borrowed]})]});return Object(j.jsx)("div",{ref:a,children:Object(j.jsx)(w.a,{count:e.frequency,children:Object(j.jsx)(B.a,{content:r,title:e.name,mouseEnterDelay:2,children:Object(j.jsx)(S.a,{hoverable:!0,style:{left:14,width:70,height:80},cover:Object(j.jsx)("img",{alt:"bookcover",src:C}),children:Object(j.jsx)(t,{title:e.name,description:e.author,onClick:function(){e.name===e.query&&_.b.success("You have successfully retrieved "+e.name)}})})})})})};var L=function(e){var t="Position "+e.position,o=Object(x.a)({accept:y,drop:function(t,o){return e.dragHandler(t,1,0,e.level,e.position)},collect:function(e){return{isOver:!!e.isOver()}}}),n=Object(g.a)(o,2),a=(n[0].isOver,n[1]),r=e.books;if(0===Object.keys(r).length&&r.constructor===Object)return Object(j.jsx)(k.a,{placement:"bottom",title:t,children:Object(j.jsx)("div",{className:"bookstand"})});var s=r.filter((function(e){return 1===e.location}));return Object(j.jsx)(k.a,{placement:"bottom",title:t,children:Object(j.jsx)("div",{className:"bookstand",ref:a,children:s.map((function(t){if(t.level===e.level&&t.position===e.position)return Object(j.jsx)(P,{code:t.code,name:t.name,author:t.author,location:t.location,level:t.level,position:t.position,created_date:t.created_date,frequency:t.frequency,last_borrowed:t.last_borrowed},t.code)}))})})},q=function(e){Object(l.a)(o,e);var t=Object(b.a)(o);function o(){return Object(i.a)(this,o),t.apply(this,arguments)}return Object(c.a)(o,[{key:"render",value:function(){for(var e=this,t="Level "+this.props.level,o=this.props.numOfBooksPerLevel,n=[],a=0;a<o;a++)n=[].concat(Object(m.a)(n),[{position:a+1,level:this.props.level,books:this.props.books}]);return Object(j.jsx)(k.a,{placement:"leftTop",title:t,children:Object(j.jsx)("div",{className:"bookcase",children:n.map((function(t){return Object(j.jsx)("div",{className:"single",children:Object(j.jsx)(L,{position:t.position,level:t.level,books:t.books,dragHandler:e.props.dragHandler},t.position)})}))})})}}]),o}(n.Component),I=function(e){Object(l.a)(o,e);var t=Object(b.a)(o);function o(){var e;Object(i.a)(this,o);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(c.a)(o,[{key:"render",value:function(){for(var e=this,t=this.props.numOfLevels,o=this.props.numOfBooksPerLevel,n=[],a=0;a<t;a++)n=[].concat(Object(m.a)(n),[{level:a+1,numOfBooks:o,books:this.props.books}]);return Object(j.jsxs)("div",{className:"bookshelf",children:[Object(j.jsx)("h5",{class:"text-center",children:Object(j.jsx)("strong",{children:"Bookshelf"})}),n.map((function(t){return Object(j.jsx)(q,{level:t.level,numOfBooksPerLevel:t.numOfBooks,books:t.books,dragHandler:e.props.dragHandler,dbclick:e.props.dbclick},t.level)}))]})}}]),o}(n.Component),D=(o(161),o(140)),E=o(101),H=o(102),K=o(142),T=o(116),Y=o(207),F=o(215),M="STORED_BOOK_KEY";function A(){try{var e=localStorage.getItem(M);return e?JSON.parse(e):(localStorage.setItem(M,"[]"),[])}catch(t){return localStorage.setItem(M,"[]"),[]}}function R(e){var t=a.a.useState(),n=Object(g.a)(t,2),r=n[0],s=n[1],i=a.a.useState(),c=Object(g.a)(i,2),l=c[0],b=c[1],u=a.a.useState(),h=Object(g.a)(u,2),d=h[0],O=h[1],f=a.a.useState(),v=Object(g.a)(f,2),p=v[0],m=v[1];return a.a.useEffect((function(){if(e.show){!function(e,t){console.log("storing book",e);var n,a,r=A();if(r.find((function(t){return t.name===e})))sessionStorage.setItem(M,e);else{var s={code:o(188)(),name:e,location:0,bin:(n=1,a=t,n=Math.ceil(n),a=Math.floor(a),Math.floor(Math.random()*(a-n+1)+n)),level:0,position:0,created_date:0,frequency:0,last_borrowed:0};r.push(s);var i=JSON.stringify(r);localStorage.setItem(M,i)}}(e.query,e.numOfBins);var t=A().find((function(t){return t.name===e.query}));t&&(s(t.location),b(t.level),O(t.position),m(t.bin))}}),[e.show,e.query,e.numOfBins]),Object(j.jsxs)(Y.a,Object(T.a)(Object(T.a)({},e),{},{dialogClassName:"custom-dialog",children:[Object(j.jsx)(Y.a.Header,{closeButton:!0,onClick:function(){0===r?_.b.info("Please switch to the Librarian role on the Upper Right Corner to move "+e.query+" from storage bin to bookshelf.",30):1===r&&(_.b.info("You can now retrieve the book on level "+l+" and position "+d),_.b.warn("Please double click on the book to retrieve"))},children:Object(j.jsx)(Y.a.Title,{children:"Library Catalog"})}),Object(j.jsxs)(Y.a.Body,{children:[Object(j.jsxs)("p",{children:["Book Name: ",e.query]}),Object(j.jsxs)("p",{children:["Location: ",0===r?"storage":"bookshelf",Object(j.jsx)("br",{}),"Storage Bin: ",p,Object(j.jsx)("br",{}),"Level: ",l,Object(j.jsx)("br",{}),"Position: ",d]})]}),Object(j.jsx)(Y.a.Footer,{children:Object(j.jsx)(F.a,{type:"button",onClick:function(){e.onHide(),0===r?_.b.info("Please switch to the Librarian role on the Upper Right Corner to move "+e.query+" from storage bin to bookshelf.",30):1===r&&(_.b.info("You can now retrieve the book on level "+l+" and position "+d),_.b.warn("Please double click on the book to retrieve"))},children:"Close"})})]}))}var J=o(206),U=o(143);var V=function(e){var t=e.binId,o=Object(x.a)({accept:y,drop:function(o,n){return e.dragHandler(o,0,t,0,0)},collect:function(e){return{isOver:!!e.isOver()}}}),n=Object(g.a)(o,2),a=(n[0].isOver,n[1]),r=Object(j.jsx)("div",{className:"book-container"}),s="Bin "+e.binId;if(0===Object.keys(e.books).length&&e.books.constructor===Object);else{var i=e.books.filter((function(e){return 0===e.location}));r=Object(j.jsx)("div",{className:"book-container",children:i.map((function(e){return Object(j.jsx)("div",{className:"book-align-block",children:Object(j.jsx)(P,{code:e.code,name:e.name,author:e.author,location:e.location,level:e.level,position:e.position,created_date:e.created_date,frequency:e.frequency,last_borrowed:e.last_borrowed},e.code)})}))})}return Object(j.jsx)(k.a,{placement:"top",title:s,children:Object(j.jsx)(B.a,{content:r,placement:"top",title:s,trigger:"click",children:Object(j.jsx)("div",{className:"bin",ref:a})})})},z=function(e){Object(l.a)(o,e);var t=Object(b.a)(o);function o(){var e;Object(i.a)(this,o);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(c.a)(o,[{key:"render",value:function(){var e=this,t=this.props.numOfBins,o=this.props.books,n=[];if(0===Object.keys(this.props.books).length&&this.props.books.constructor===Object)for(var a=0;a<t;a++)n=[].concat(Object(m.a)(n),[{binId:a+1,books:[]}]);else for(var r=function(e){var t=o.filter((function(t){return t.bin===e+1}));n=[].concat(Object(m.a)(n),[{binId:e+1,books:t}])},s=0;s<t;s++)r(s);return Object(j.jsxs)("div",{className:"storage",children:[Object(j.jsx)("h5",{children:Object(j.jsx)("strong",{children:"Book Storage"})}),n.map((function(t){return Object(j.jsx)(V,{binId:t.binId,books:t.books,dragHandler:e.props.dragHandler},t.binId)}))]})}}]),o}(n.Component);function G(){try{var e=localStorage.getItem("STORED_BOOK_KEY");return e?JSON.parse(e):(localStorage.setItem("STORED_BOOK_KEY","[]"),[])}catch(t){return[]}}function Q(){try{var e={};return Object.entries(localStorage).map((function(t){var o=Object(g.a)(t,2),n=(o[0],o[1]),a=JSON.parse(n);e=a})),e}catch(t){return[]}}var W=function(e){Object(l.a)(o,e);var t=Object(b.a)(o);function o(e){var n;return Object(i.a)(this,o),(n=t.call(this,e)).dragHandler=function(e,t,o,a,r){var s=Object(m.a)(n.state.books),i=s.filter((function(t){return t.code===e.code})),c=s.indexOf(i[0]);i[0].location=t,i[0].bin=o,i[0].level=a,i[0].position=r,s[c]=i[0],n.setState({books:s});for(var l=0,b=1,u=G(),h=(n.numOfShelfLevels,n.numOfBooksPerLevel,0);h<u.length;h++)u[h].name!==e.name&&1===t&&u[h].level===a&&u[h].position===r&&(l=1),1===u[h].location&&(b+=1);if(1===t&&b>n.state.numOfShelfLevels*n.state.numOfBooksPerLevel&&(l=2),0===l){for(h=0;h<u.length;h++){if(u[h].code===e.code){if(0===u[h].location&&1===t){var d=new Date;u[h].created_date=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()}u[h].name=e.name,u[h].location=t,u[h].bin=o,u[h].level=a,u[h].position=r}var j=JSON.stringify(u);localStorage.setItem("STORED_BOOK_KEY",j)}1===t&&_.b.success(e.name+" is available now. Please search it again in the system.")}else 1===l?(alert("A book already exists on this position. Please choose another position as a librarian again!"),window.location.reload()):alert("The bookshelf is full. Please remove a book from the shelf to storage bin before adding another book to the shelf.")},n.dbclick=function(){document.ondblclick=function(e){if(!0===e.target.draggable){var t=e.target.offsetParent.innerText,o=sessionStorage.getItem("STORED_BOOK_KEY");if(o===t){alert("You choose right");for(var n=G(),a=new Date,r=0;r<n.length;r++){n[r].name===o&&(n[r].frequency+=1,n[r].last_borrowed=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.toLocaleTimeString());var s=JSON.stringify(n);localStorage.setItem("STORED_BOOK_KEY",s),window.location.reload()}sessionStorage.setItem("STORED_BOOK_KEY","")}else alert("Please choose again")}}},n.catalogClose=function(){return n.setState({catalogShow:!1})},n.state={value:"",lib:[],catalogShow:!1,numOfShelfLevels:5,numOfBooksPerLevel:3,numOfBins:4,books:Q(),query:""},n}return Object(c.a)(o,[{key:"componentDidUpdate",value:function(e,t){this.state.catalogShow!==t.catalogShow&&this.setState({books:Q()})}},{key:"render",value:function(){var e=this,t=this.props.value;this.state.lib;return Object(j.jsx)("div",{className:"main",children:Object(j.jsx)(D.a,{fluid:"lg",children:Object(j.jsxs)(E.a,{children:[Object(j.jsx)(H.a,{children:Object(j.jsx)("div",{className:"search-monitor",children:Object(j.jsxs)("div",{className:"search-container",children:[Object(j.jsx)(E.a,{children:Object(j.jsx)("h6",{children:"Search a Book in the Library"})}),Object(j.jsxs)(E.a,{children:[Object(j.jsxs)("div",{className:"form-inline mt-4 mb-4",children:[Object(j.jsx)(K.c,{icon:"search"}),Object(j.jsx)("input",{className:"form-control form-control-sm ml-3 w-75",type:"text",placeholder:"Find a Book","aria-label":"Search",value:this.state.query,onChange:function(t){return e.setState({query:t.target.value})},onKeyPress:function(t){"Enter"===t.key&&(e.state.query?e.setState({catalogShow:!0,value:t.target.value}):alert("Please input a name!"))}})]}),Object(j.jsx)(R,{query:this.state.query,show:this.state.catalogShow,onHide:this.catalogClose,numOfBins:this.state.numOfBins})]})]})})}),Object(j.jsxs)(J.a,{backend:U.a,children:[Object(j.jsx)(H.a,{className:"bookshelf-view",children:Object(j.jsx)("div",{children:Object(j.jsx)(I,{numOfLevels:this.state.numOfShelfLevels,numOfBooksPerLevel:this.state.numOfBooksPerLevel,books:this.state.books,dragHandler:this.dragHandler.bind(this),dbclick:this.dbclick()})})}),Object(j.jsx)(H.a,{className:"storage-view",children:Object(j.jsx)("div",{className:"Student"===t?"wrapper":"",children:Object(j.jsx)("div",{className:"Student"===t?"is-disabled":"",children:Object(j.jsx)(z,{books:this.state.books,numOfBins:this.state.numOfBins,dragHandler:this.dragHandler.bind(this)})})})})]})]})})})}}]),o}(n.Component),X=o(213),Z=(o(190),function(e){Object(l.a)(o,e);var t=Object(b.a)(o);function o(){var e;Object(i.a)(this,o);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={value:"Student",visible:!1},e.handleValueChange=function(t){console.log("role button checked",t.target.value),e.setState({value:t.target.value})},e.clickOverview=function(t){console.log("overview button clicked",t.target.value),e.showDrawer()},e.showDrawer=function(){e.setState({visible:!0})},e.onClose=function(){e.setState({visible:!1})},e}return Object(c.a)(o,[{key:"render",value:function(){var e=this.state.value;return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(v,{value:e,onChange:this.handleValueChange.bind(this),clickOverview:this.clickOverview.bind(this)}),Object(j.jsxs)(X.a,{title:"Introduction",placement:"right",width:"400px",closable:!1,onClose:this.onClose,visible:this.state.visible,children:[Object(j.jsx)("h5",{children:"Memory Paging vs. Library Analogy"}),Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:"A page is a book on the bookshelf."}),Object(j.jsx)("li",{children:"Virtual memory is the list of names of books available."}),Object(j.jsx)("li",{children:"Physical memory is the bookshelf with level numbers and position numbers as 'addresses'."}),Object(j.jsx)("li",{children:"Swap space is the basement book storage where unpopular books are kept."}),Object(j.jsx)("li",{children:"Page table is the catalog that maps a book name to level number and position number."}),Object(j.jsx)("li",{children:"Operating system is the librarian in charge of organizing the books."})]}),Object(j.jsx)("h5",{children:"Bookshelf Function Instruction"}),Object(j.jsx)("p",{children:"For each book,"}),Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:"Mouse over 2 seconds for the book details."}),Object(j.jsx)("li",{children:"Double click for retriving the book."})]})]}),Object(j.jsx)(W,{value:e}),Object(j.jsx)(p,{})]})}}]),o}(a.a.Component)),$=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,217)).then((function(t){var o=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;o(e),n(e),a(e),r(e),s(e)}))};o(191),o(192),o(193),o(194);s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(Z,{})}),document.getElementById("root")),$()}},[[195,1,2]]]);
//# sourceMappingURL=main.76f960fe.chunk.js.map